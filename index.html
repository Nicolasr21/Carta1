<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carta para Mi Novia</title>
  <style>
    body {
      background: linear-gradient(to right, #d8c0fd, #7904eeca);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      padding: 10px;
      font-family: 'Georgia', serif;
      overflow: hidden;
      box-sizing: border-box;
    }

    .sobre-contenedor {
      position: relative;
      width: 90vw;
      height: 85vh;
      max-width: 820px;
      max-height: 720px;
      perspective: 1000px;
    }

    .sobre {
      position: relative;
      width: 100%;
      height: 100%;
      background: #fbe3ff;
      border: 2px solid #000000;
      border-radius: 10px;
      box-shadow: 0 8px 15px rgba(0,0,0,0.2);
      overflow: hidden;
      z-index: 1;
    }

    .tapa {
      position: absolute;
      width: 100%;
      height: 50%;
      background: #7904ee;
      top: 0;
      left: 0;
      transform-origin: top;
      animation: abrirSobre 3s ease forwards;
      z-index: 3;
    }

    .carta {
      position: absolute;
      width: 90%;
      height: 90%;
      background: #fff;
      top: 100%;
      left: 5%;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      opacity: 0;
      animation: subirCarta 2s ease 1s forwards;
      padding: 20px;
      box-sizing: border-box;
      text-align: center;
      z-index: 2;
      overflow-y: auto;
    }

    .carta h1 {
      font-size: 22px;
      color: #c71585;
      margin-top: 10px;
    }

    .corazon {
      font-size: 30px;
      animation: latido 1.5s infinite;
    }

    .mensaje {
      font-size: 18px;
      color: #333;
      margin-top: 15px;
      line-height: 2;
      text-align: justify;
    }

    .boton-repetir {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #7904ee;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .boton-repetir:hover {
      background-color: #b404ff;
    }

    @keyframes abrirSobre {
      0% { transform: rotateX(0); }
      100% { transform: rotateX(-180deg); }
    }

    @keyframes subirCarta {
      0% { top: 90%; opacity: 0; }
      100% { top: 5%; opacity: 1; }
    }

    @keyframes latido {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }

    @media (max-width: 600px) {
      .carta h1 {
        font-size: 20px;
      }

      .mensaje {
        font-size: 16px;
      }

      .boton-repetir {
        font-size: 14px;
        padding: 8px 16px;
      }
    }
  </style>
</head>
<body>

<div class="sobre-contenedor" id="animacion">
  <div class="sobre">
    <div class="tapa"></div>
    <div class="carta">
      <div class="corazon">❤️</div>
      <h1>Para Mi Amada Novia</h1>
      <p class="mensaje" id="mensaje"></p>
    </div>
  </div>
</div>

<button class="boton-repetir" onclick="reiniciarAnimacion()">Reproducir de nuevo</button>

<script>
  const texto = `Mi polola linda,

Admiro cada cosa que haces, la pasión, el amor y el esfuerzo que demuestras, esa forma de alegar, de ser hija, prima, hermana y sobre todo mi novia, se que no es tarea facil y por eso te quiero agredecer por toda la paciencia y el amor infinito que me brindas.

Se que muchas veces sentimos que no somos suficientes o que lo estamos haciendo mal, pero la misma vida te demuetra lo buena que eres, los frutos de tu esfuerzo se ven reflejados cada vez más.

Te amo con las fuerzas de mi alma, se que muy pronto estaremos en nuestra casita, construyendo nuestro hogar, ese hogar con el que tanto soñamos vivir y el que tanto añoramos brindar a nuestro hij@.

Vida hermosa, todo sera mejor

Siempre tuyo,

Tu pololo ❤️`;

  const mensajeElemento = document.getElementById("mensaje");

  function escribirTexto(i = 0) {
    if (i < texto.length) {
      mensajeElemento.innerHTML += texto[i] === '\n' ? '<br>' : texto[i];
      setTimeout(() => escribirTexto(i + 1), 40);
    }
  }

  function mostrarCartaAnimada() {
    escribirTexto();
  }

  setTimeout(mostrarCartaAnimada, 3200); // Esperar a que termine la animación del sobre

  function reiniciarAnimacion() {
    const animacion = document.getElementById("animacion");
    const tapa = animacion.querySelector(".tapa");
    const carta = animacion.querySelector(".carta");

    tapa.style.animation = 'none';
    carta.style.animation = 'none';
    carta.style.opacity = '0';
    carta.style.top = '100%';
    mensajeElemento.innerHTML = '';

    void animacion.offsetWidth;

    tapa.style.animation = "abrirSobre 2s ease forwards";
    carta.style.animation = "subirCarta 2s ease 2s forwards";

    setTimeout(mostrarCartaAnimada, 3200);
  }
</script>

</body>
</html>
